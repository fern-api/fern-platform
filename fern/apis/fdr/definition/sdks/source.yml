# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

service:
  base-path: /sdks
  auth: true
  endpoints:
    startSourceUpload:
      audiences:
        - write
      docs: |
        Creates an S3 file upload URL to upload source files (e.g. Protobuf or OpenAPI).

        With this, the generator can pull down the source files required to perform any
        additional code generation (e.g. gRPC client stub generation).

        This is the generator's responsibility because there are different requirements
        specific to each language. For example, C# needs _all_ the .proto source files to
        generate the stubs dynamically.
      path: /source/init
      request:
        name: StartSourceUploadRequest
        body:
          properties:
            sourceType:
              type: SourceType
              docs: The type of the source to upload (e.g. Protobuf or OpenAPI).
      response: StartSourceUploadResponse
      errors:
        - InternalSourceUploadError

types:
  SourceType:
    union:
      proto: {}
      openapi: {}

  StartSourceUploadResponse:
    properties:
      sourceUploadId:
        docs: A unique identifier representing this source upload artifact.
        type: string
      uploadUrl:
        docs: The URL to upload the source files to.
        type: string

errors:
  InternalSourceUploadError:
    status-code: 500
