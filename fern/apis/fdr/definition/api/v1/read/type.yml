# yaml-language-server: $schema=https://raw.githubusercontent.com/fern-api/fern/main/fern.schema.json

imports:
  commons: commons.yml

types:
  TypeId: string

  TypeDefinition:
    extends:
      - commons.WithDescription
      - commons.WithAvailability
    properties:
      name: string
      shape: TypeShape

  TypeShape:
    union:
      alias: TypeReference
      enum: EnumType
      undiscriminatedUnion: UndiscriminatedUnionType
      discriminatedUnion: DiscriminatedUnionType
      object: ObjectType

  TypeReference:
    union:
      id: TypeId
      primitive: PrimitiveType
      optional: OptionalType
      list: ListType
      set: SetType
      map: MapType
      literal: LiteralType
      unknown: {}

  ObjectType:
    properties:
      extends: list<TypeId>
      properties: list<ObjectProperty>

  PropertyKey: string

  ObjectProperty:
    extends:
      - commons.WithDescription
      - commons.WithAvailability
    properties:
      key: PropertyKey
      valueType: TypeReference

  PrimitiveType:
    union:
      integer: IntegerType
      double: DoubleType
      long: {}
      string: StringType
      boolean: {}
      datetime: {}
      uuid: {}
      base64: {}
      date: {}

  IntegerType:
    properties:
      minimum: optional<integer>
      maximum: optional<integer>
      default: optional<integer>

  DoubleType:
    properties:
      minimum: optional<double>
      maximum: optional<double>
      default: optional<double>

  StringType:
    properties:
      regex: optional<string>
      minLength: optional<integer>
      maxLength: optional<integer>
      default: optional<string>

  OptionalType:
    properties:
      itemType: TypeReference
      defaultValue: optional<unknown>

  ListType:
    properties:
      itemType: TypeReference

  SetType:
    properties:
      itemType: TypeReference

  MapType:
    properties:
      keyType: TypeReference
      valueType: TypeReference

  EnumType:
    properties:
      values: list<EnumValue>

  EnumValue:
    extends: commons.WithDescription
    properties:
      value: string

  UndiscriminatedUnionType:
    properties:
      variants: list<UndiscriminatedUnionVariant>

  UndiscriminatedUnionVariant:
    extends:
      - commons.WithDescription
      - commons.WithAvailability
    properties:
      displayName: optional<string>
      type: TypeReference

  DiscriminatedUnionType:
    properties:
      discriminant: string
      variants: list<DiscriminatedUnionVariant>

  DiscriminatedUnionVariant:
    extends:
      - commons.WithDescription
      - commons.WithAvailability
    properties:
      discriminantValue: string
      additionalProperties: ObjectType

  LiteralType:
    union:
      booleanLiteral: boolean
      stringLiteral: string

  FileUploadRequest:
    extends:
      - commons.WithDescription
      - commons.WithAvailability
    properties:
      name: string
      properties: list<FileUploadRequestProperty>

  BytesRequest:
    properties:
      isOptional: boolean
      contentType: optional<string>

  FileUploadRequestProperty:
    union:
      file: FileProperty
      bodyProperty: ObjectProperty

  FileProperty:
    union:
      file: FilePropertySingle
      fileArray: FilePropertyArray

  FilePropertySingle:
    extends:
      - commons.WithDescription
      - commons.WithAvailability
    properties:
      key: PropertyKey
      isOptional: boolean

  FilePropertyArray:
    extends:
      - commons.WithDescription
      - commons.WithAvailability
    properties:
      key: PropertyKey
      isOptional: boolean
