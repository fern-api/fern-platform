imports:
  commons: ./commons.yml

types:
  CliDeclaration:
    extends: commons.Release

  IrDeclaration:
    properties:
      cli_version: string
      ir_version: string

service:
  base-path: /cli
  auth: true
  endpoints:
    getLatestCliDeclaration:
      docs: Get the latest CLI version that has not been yanked.
      method: GET
      path: /latest
      request:
        name: GetLatestCliDeclarationRequest
        body:
          properties:
            include_rcs:
              type: optional<boolean>
              docs: Whether or not to include RCs when searching for the latest version. Defaults to false.
      response: CliDeclaration
    getMinCliForIr:
      docs: Get the minimum CLI version that supports the given IR version. This does not include RCs.
      method: GET
      path: /for-ir
      request:
        name: GetMinCliForIrRequest
        body:
          properties:
            ir_version: string
      response: CliDeclaration
    upsertCliDeclaration:
      docs: Update or create the specified CLI version.
      method: PUT
      path: /
      request: CliDeclaration
    getCliDeclaration:
      docs: Get the specified CLI version.
      method: GET
      path: /{cli_version}
      request:
        name: GetCliDeclarationRequest
        path-params:
          cli_version: string
      response: CliDeclaration
