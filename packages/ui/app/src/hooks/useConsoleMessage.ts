import { useEffect } from "react";
import { useFeatureFlags } from "../atoms";

let hasBeenCalled = false;

export const useConsoleMessage = (): void => {
    const { isWhitelabeled } = useFeatureFlags();

    useEffect(() => {
        if (hasBeenCalled || isWhitelabeled) {
            return;
        }

        hasBeenCalled = true;

        const color = "#1da32b";
        // const svgString = `<svg viewBox="0 0 1370 480" fill="${color}" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M670.518 64H585.653H585.598C538.706 64 511.567 88.6743 511.567 136.053V165.652H450.887V225.833H511.567V409.386H580.674V225.833H655.69V165.652H580.674V144.424C580.674 130.09 588.553 124.181 602.889 124.181H670.518V64ZM778.055 158.279C705.993 158.279 656.639 208.613 656.639 286.083H656.694C656.694 365.03 706.048 416.84 780.572 416.84C842.729 416.84 880.21 385.273 894.546 336.909H823.962C817.505 350.258 803.224 359.613 781.009 359.613C747.961 359.613 727.716 342.817 724.761 312.234H897.5C898.485 301.894 898.978 292.976 898.978 284.113C898.978 206.643 850.116 158.279 778.055 158.279ZM829.379 258.946V259.931H724.268C726.238 231.318 744.514 212.552 778.055 212.552C811.596 212.552 829.379 231.318 829.379 258.946ZM923.126 165.645H983.807V208.592C989.716 180.964 1009.47 165.645 1040.55 165.645H1083.99V174.015C1083.99 202.629 1060.79 225.826 1032.18 225.826C1005.04 225.826 992.178 239.668 992.178 267.297V409.435H923.071V165.645H923.126ZM1169.05 165.658H1108.37H1108.32V409.394H1177.43V270.757C1177.43 239.682 1195.7 220.423 1223.33 220.423C1250.96 220.423 1265.79 236.235 1265.79 268.788V409.448H1334.9V261.402C1334.9 196.788 1297.36 158.272 1237.67 158.272C1209.54 158.272 1183.39 169.105 1169.05 190.333V165.658Z"></path><path d="M356.495 236.668C333.276 217.039 298.297 209.171 267.295 232.085C265.868 233.122 264.095 231.35 265.176 229.966C272.527 220.498 281.045 210.295 287.92 200.048C294.924 189.543 305.388 182.02 317.451 178.345C381.66 158.89 362.376 64.0342 362.376 64.0342C362.376 64.0342 263.187 70.4328 275.424 155.993C277.456 170.303 273.651 184.873 264.701 196.244C253.718 210.122 240.963 223.395 231.71 232.993C229.764 234.981 226.478 233.079 227.256 230.399C236.207 200.265 242.736 153.658 211.734 123.611L168.106 87.3805L159.718 98.4484C134.77 131.35 142.077 177.74 175.024 202.642C193.92 216.91 202.481 232.431 201.14 249.465C200.319 259.668 195.692 269.223 188.774 276.789C175.76 291.056 163.61 306.361 154.227 324.087C152.93 326.551 149.168 325.6 149.298 322.79C150.638 293.52 147.828 227.545 98.536 203.983L43.364 182.668L39.0834 195.422C25.204 236.581 47.904 280.55 89.0236 294.515C124.782 306.663 137.537 329.707 128.933 364.251C128.543 365.505 122.317 401.086 123.182 416.867H162.831C164.172 392.396 189.855 376.313 212.123 386.3C218.392 389.111 224.835 393.131 231.45 398.32C266.906 426.249 319.138 419.634 347.026 384.139L354.982 374.022L304.826 338.008C270.408 310.944 224.489 323.179 190.504 346.352C187.65 348.298 184.018 345.185 185.618 342.072C226.694 261.484 280.093 261.657 301.021 279.556C326.402 301.259 364.84 297.368 386.373 271.903L392.556 264.597L356.452 236.668H356.495Z"></path></svg>`;
        const svgString = `
<svg fill="${color}" viewBox="0 0 604 164" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M295.294 0H255.861H255.836C234.047 0 221.437 11.4661 221.437 33.483V47.2372H193.242V75.2033H221.437V160.5H253.547V75.2033H288.404V47.2372H253.547V37.3728C253.547 30.7118 257.208 27.9661 263.87 27.9661H295.294V0ZM345.26 43.8081C311.777 43.8081 288.844 67.1979 288.844 103.198H288.87C288.87 139.884 311.802 163.96 346.43 163.96C375.311 163.96 392.727 149.291 399.388 126.816H366.591C363.591 133.02 356.955 137.367 346.633 137.367C331.277 137.367 321.87 129.562 320.497 115.35H400.761C401.219 110.545 401.447 106.401 401.447 102.283C401.447 66.2826 378.744 43.8081 345.26 43.8081ZM369.108 90.5877V91.0453H320.269C321.184 77.7487 329.675 69.0284 345.26 69.0284C360.845 69.0284 369.108 77.7487 369.108 90.5877ZM412.668 47.2321H440.863V67.1898C443.609 54.3508 452.787 47.2321 467.227 47.2321H487.414V51.122C487.414 64.4186 476.634 75.1982 463.338 75.1982C450.727 75.1982 444.753 81.6304 444.753 94.4694V160.52H412.642V47.2321H412.668ZM526.939 47.24H498.744H498.719V160.503H530.829V96.0789C530.829 81.6382 539.321 72.6891 552.16 72.6891C564.999 72.6891 571.889 80.0366 571.889 95.1637V160.528H604V91.7315C604 61.7061 586.559 43.8078 558.821 43.8078C545.753 43.8078 533.601 48.8417 526.939 58.7061V47.24Z"/>
<path d="M149.383 80.2222C138.594 71.101 122.341 67.4445 107.936 78.0925C107.273 78.5747 106.449 77.751 106.952 77.1081C110.367 72.7082 114.325 67.9668 117.519 63.2053C120.774 58.3233 125.636 54.8275 131.241 53.1198C161.076 44.079 152.116 0 152.116 0C152.116 0 106.027 2.97342 111.713 42.7329C112.657 49.3829 110.889 56.1535 106.731 61.4374C101.628 67.8865 95.7008 74.0543 91.4014 78.5144C90.4973 79.4386 88.9705 78.5546 89.3321 77.309C93.4909 63.3058 96.5246 41.648 82.1195 27.685L61.848 10.849L57.9504 15.9922C46.3581 31.2812 49.7534 52.8385 65.0625 64.4108C73.8422 71.0407 77.8201 78.2533 77.1973 86.169C76.8156 90.9104 74.6659 95.3505 71.4514 98.8663C65.4041 105.496 59.7586 112.608 55.3989 120.846C54.7962 121.991 53.0483 121.549 53.1086 120.243C53.7314 106.641 52.4255 75.983 29.5221 65.0336L3.88635 55.1289L1.89737 61.0556C-4.55174 80.182 5.99588 100.614 25.1021 107.104C41.7171 112.749 47.6439 123.457 43.6458 139.51C43.465 140.092 40.572 156.627 40.9738 163.96H59.3969C60.0198 152.589 71.9536 145.115 82.3003 149.756C85.2135 151.062 88.207 152.93 91.2809 155.341C107.755 168.32 132.025 165.246 144.983 148.752L148.68 144.05L125.375 127.315C109.383 114.738 88.0463 120.424 72.255 131.192C70.929 132.096 69.2414 130.65 69.9847 129.203C89.0709 91.7542 113.883 91.8346 123.607 100.152C135.4 110.238 153.261 108.429 163.266 96.5961L166.139 93.2007L149.363 80.2222H149.383Z"/>
</svg>
`.trim();
        const svgUrl = `data:image/svg+xml;base64,${btoa(svgString)}`;

        // eslint-disable-next-line no-console
        console.log(
            "\n%cBuilt with %c %c\n%cCheck out https://buildwithfern.com\n",
            `
                font-size: 14px;
                color: ${color};
            `,
            `
                font-size: 1px;
                padding: 22px 0 2px 88px;
                background: url(${svgUrl}) no-repeat;
                background-size: contain;
                background-position: center;
            `,
            "",
            `
                margin-block: 4px;
                font-size: 11px;
                color: ${color};
            `,
        );
    }, [isWhitelabeled]);
};
