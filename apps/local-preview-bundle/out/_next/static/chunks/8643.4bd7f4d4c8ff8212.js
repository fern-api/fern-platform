"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8643],{78643:function(e,t,i){i.r(t),i.d(t,{FeedbackPopover:function(){return x}});var n=i(38093),a=i(11932),s=i(6249),c=i(74217),o=i(69293),l=i(80912),r=i(91905),d=i(56945),u=i(23902),m=i(92584);let p=()=>{let[e,t]=(0,d.useState)(null);return(0,d.useEffect)(()=>{let e=()=>{t(window.getSelection())};return document.addEventListener("selectionchange",e),()=>{document.removeEventListener("selectionchange",e)}},[]),{selection:e}};var y=i(53177);let b=(0,c.E)(a.sR),h=(0,c.E)(a.Pz),v=(0,c.E)(u.VY),x=(0,d.forwardRef)((e,t)=>{let{children:i}=e,[a,x]=(0,d.useState)(),[f,g]=(0,d.useState)(!1),{selection:k}=p(),j=(0,d.useCallback)(()=>{x(!0),(0,m.capturePosthogEvent)("feedback_voted",{satisfied:!0,selectedText:null==k?void 0:k.toString().trim()})},[k]),E=(0,d.useCallback)(()=>{x(!1),(0,m.capturePosthogEvent)("feedback_voted",{satisfied:!1,selectedText:null==k?void 0:k.toString().trim()})},[k]),N=(0,d.useCallback)(e=>{let{feedbackId:t}=e;(0,m.capturePosthogEvent)("feedback_submitted",{satisfied:a,feedback:t,selectedText:null==k?void 0:k.toString().trim()}),g(!0),setTimeout(()=>{g(!1),x(void 0)},3e3)},[a,k]),w=(0,d.useCallback)(e=>{e||x(void 0)},[]),C=(0,d.useMemo)(()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b,{layoutId:"thumbs-up",icon:(0,n.jsx)(o.Z,{className:(0,s.Z)("opacity-60",{"animate-thumb-rock":a})}),variant:"minimal",intent:a?"success":"none",active:a,onClick:j,className:(0,s.Z)({"w-full":void 0!==a}),transition:{type:"spring",duration:.3,bounce:0},children:"Helpful"}),(0,n.jsx)(b,{layoutId:"thumbs-down",icon:(0,n.jsx)(l.Z,{className:(0,s.Z)("opacity-60",{"animate-thumb-rock":!1===a})}),variant:"minimal",intent:!1===a?"danger":"none",active:!1===a,onClick:E,className:(0,s.Z)({"w-full":void 0!==a}),transition:{type:"spring",duration:.3,bounce:0},children:"Not Helpful"})]}),[E,j,a]);return(0,n.jsxs)(u.fC,{whileSelect:!0,onOpenChange:w,children:[(0,n.jsx)(u.xz,{ref:t,children:i}),(0,n.jsx)(u.h_,{children:(0,n.jsxs)(v,{layout:!0,transition:{type:"spring",duration:.4,bounce:0},sideOffset:8,className:(0,s.Z)("z-50 rounded-lg border border-default bg-white/50 backdrop-blur-xl dark:bg-background/50 p-1 shadow-xl",{"p-2 space-y-2 min-w-80":void 0!==a}),children:[(0,n.jsx)(h,{layout:!0,className:"flex items-center gap-1",children:!f&&C}),void 0!==a&&(f?(0,n.jsxs)(c.E.div,{transition:{type:"spring",duration:.3,bounce:0},initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"space-y-2 py-2",children:[(0,n.jsx)(c.E.div,{layoutId:"icon-container",className:"bg-tag-primary t-accent size-8 mx-auto rounded-md flex items-center justify-center",children:(0,n.jsx)(r.Z,{})}),(0,n.jsx)(c.E.p,{layoutId:"success-title",className:"text-md font-semibold text-center",children:"Feedback received!"}),(0,n.jsx)(c.E.p,{layoutId:"success-description",className:"t-muted text-sm text-center",children:"Thank you for improving the docs."})]},void 0===f?"y":"n"):(0,n.jsx)(c.E.div,{transition:{type:"spring",duration:.3,bounce:0},initial:{opacity:0,y:25},animate:{opacity:1,y:0},exit:{opacity:0,y:-25},children:(0,n.jsx)(y.q5,{layoutDensity:"condensed",onSubmit:N,isHelpful:a})},void 0===a?"y":"n"))]})})]})});x.displayName="FeedbackPopover"}}]);